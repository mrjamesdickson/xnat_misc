Timing is on.

=========================================
Testing Indexes for Large Tables
=========================================
Configuration:
  MAX_TABLES:  20
  MIN_SIZE_MB:  1
  MIN_SEQ_SCANS:  10

CREATE FUNCTION
Time: 7.533 ms
Test function created

CREATE TABLE
Time: 9.428 ms
INSERT 0 1
Time: 3.015 ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing Top 20 Largest Tables
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 1/20: xdat_change_info (50 MB, 257436 rows, 107 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xdat_change_info_change_user on xdat_change_info.change_user
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.46680000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xdat_change_info_change_user
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.23880000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 48.84.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 2/20: xhbm_container_entity_input (14 MB, 122564 rows, 19 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_container_entity_input_name on xhbm_container_entity_input.name
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.71460000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_container_entity_input_name
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.52860000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 26.03.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 3/20: xhbm_container_entity_history (14 MB, 96133 rows, 82 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_container_entity_history_entity_id on xhbm_container_entity_history.entity_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 2.7950000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_container_entity_history_entity_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.38740000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 86.14.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 4/20: wrk_workflowdata (13 MB, 33804 rows, 611 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped wrk_workflowdata - no data in column executionenvironment_wrk_abstractexecutionenvironment_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_wrk_workflowdata_comments on wrk_workflowdata.comments
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 3.5354000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_wrk_workflowdata_comments
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.52400000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 85.18.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 5/20: xdat_user_login (12 MB, 39897 rows, 2253 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xdat_user_login_login_date on xdat_user_login.login_date
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 2.5420000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xdat_user_login_login_date
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.39900000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 84.30.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 6/20: xhbm_dicom_spatial_data (11 MB, 25365 rows, 66 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_dicom_spatial_data_created on xhbm_dicom_spatial_data.created
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 4.7602000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_dicom_spatial_data_created
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.47320000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 90.06.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 7/20: wrk_workflowdata_meta_data (9424 kB, 34264 rows, 51 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_wrk_workflowdata_meta_data_xft_version on wrk_workflowdata_meta_data.xft_version
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 2.8672000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_wrk_workflowdata_meta_data_xft_version
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.42640000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 85.13.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 8/20: xhbm_container_entity (6208 kB, 14682 rows, 77 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_container_entity_created on xhbm_container_entity.created
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 2.1774000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_container_entity_created
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.79420000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 63.53.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 9/20: xnat_resource (6192 kB, 11661 rows, 90 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped xnat_resource - no data in column provenance_prov_process_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xnat_resource_uri on xnat_resource.uri
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 3.1934000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xnat_resource_uri
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.48020000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 84.96.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 10/20: xhbm_container_entity_mount (5624 kB, 27953 rows, 70 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_container_entity_mount_container_host_path on xhbm_container_entity_mount.container_host_path
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 2.8720000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_container_entity_mount_container_host_path
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.43420000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 84.88.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 11/20: xnat_abstractresource (4024 kB, 11661 rows, 79 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped xnat_abstractresource - no data in column note
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xnat_abstractresource_label on xnat_abstractresource.label
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.49060000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xnat_abstractresource_label
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.27920000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 43.09.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 12/20: xhbm_container_entity_output (2808 kB, 16326 rows, 66 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped xhbm_container_entity_output - no data in column content
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped xhbm_container_entity_output - no data in column created
psql:/tmp/test_large_tables.sql:227: NOTICE:  Skipped xhbm_container_entity_output - no data in column descritpion
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 13/20: xs_item_cache (2768 kB, 2212 rows, 20748 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xs_item_cache_elementname on xs_item_cache.elementname
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.73020000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xs_item_cache_elementname
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.85860000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  ROLLBACK - only improved by -17.58.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 14/20: xnat_addfield (2512 kB, 123 rows, 185 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xnat_addfield_addfield on xnat_addfield.addfield
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.97280000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xnat_addfield_addfield
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.86400000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 11.18.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 15/20: xnat_imagescandata (2184 kB, 4542 rows, 560 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xnat_imagescandata_image_session_id on xnat_imagescandata.image_session_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.62540000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xnat_imagescandata_image_session_id
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.42280000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 32.40.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 16/20: xhbm_container_entity_log_paths (1888 kB, 18178 rows, 169 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xhbm_container_entity_log_paths_container_entity on xhbm_container_entity_log_paths.container_entity
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 1.3928000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xhbm_container_entity_log_paths_container_entity
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.32360000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 76.77.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 17/20: xnat_experimentdata (1408 kB, 2533 rows, 1412 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xnat_experimentdata_date on xnat_experimentdata.date
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.63600000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xnat_experimentdata_date
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.45940000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 27.77.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Test 18/20: xdat_field_mapping (1248 kB, 3687 rows, 1369 seq scans)
psql:/tmp/test_large_tables.sql:227: NOTICE:  =========================================
psql:/tmp/test_large_tables.sql:227: NOTICE:  Testing idx_test_large_xdat_field_mapping_field on xdat_field_mapping.field
psql:/tmp/test_large_tables.sql:227: NOTICE:  Baseline: 0.65780000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  Index created: idx_test_large_xdat_field_mapping_field
psql:/tmp/test_large_tables.sql:227: NOTICE:  With index: 0.47180000000000000000.2f ms
psql:/tmp/test_large_tables.sql:227: NOTICE:  KEEP - improved by 28.28.2f%
psql:/tmp/test_large_tables.sql:227: NOTICE:  
psql:/tmp/test_large_tables.sql:227: NOTICE:  Completed testing 18 tables
DO
Time: 3887.512 ms (00:03.888)

=========================================
SUMMARY
=========================================

 tables_tested | indexes_tested | kept | rolled_back | avg_improvement_pct | max_improvement_pct 
---------------+----------------+------+-------------+---------------------+---------------------
            17 |             17 |   16 |           1 |               59.91 |               90.06
(1 row)

Time: 18.245 ms

--- KEPT INDEXES (>= 5% improvement) ---
           table_name            |                           index_name                            |       column_indexed        | improvement_pct 
---------------------------------+-----------------------------------------------------------------+-----------------------------+-----------------
 xhbm_dicom_spatial_data         | idx_test_large_xhbm_dicom_spatial_data_created                  | Column: created             |           90.06
 xhbm_container_entity_history   | idx_test_large_xhbm_container_entity_history_entity_id          | Column: entity_id           |           86.14
 wrk_workflowdata                | idx_test_large_wrk_workflowdata_comments                        | Column: comments            |           85.18
 wrk_workflowdata_meta_data      | idx_test_large_wrk_workflowdata_meta_data_xft_version           | Column: xft_version         |           85.13
 xnat_resource                   | idx_test_large_xnat_resource_uri                                | Column: uri                 |           84.96
 xhbm_container_entity_mount     | idx_test_large_xhbm_container_entity_mount_container_host_path  | Column: container_host_path |           84.88
 xdat_user_login                 | idx_test_large_xdat_user_login_login_date                       | Column: login_date          |           84.30
 xhbm_container_entity_log_paths | idx_test_large_xhbm_container_entity_log_paths_container_entity | Column: container_entity    |           76.77
 xhbm_container_entity           | idx_test_large_xhbm_container_entity_created                    | Column: created             |           63.53
 xdat_change_info                | idx_test_large_xdat_change_info_change_user                     | Column: change_user         |           48.84
 xnat_abstractresource           | idx_test_large_xnat_abstractresource_label                      | Column: label               |           43.09
 xnat_imagescandata              | idx_test_large_xnat_imagescandata_image_session_id              | Column: image_session_id    |           32.40
 xdat_field_mapping              | idx_test_large_xdat_field_mapping_field                         | Column: field               |           28.28
 xnat_experimentdata             | idx_test_large_xnat_experimentdata_date                         | Column: date                |           27.77
 xhbm_container_entity_input     | idx_test_large_xhbm_container_entity_input_name                 | Column: name                |           26.03
 xnat_addfield                   | idx_test_large_xnat_addfield_addfield                           | Column: addfield            |           11.18
(16 rows)

Time: 0.717 ms

--- ROLLED BACK (<5% improvement) ---
  table_name   |                index_name                |   column_indexed    | improvement_pct 
---------------+------------------------------------------+---------------------+-----------------
 xs_item_cache | idx_test_large_xs_item_cache_elementname | Column: elementname |          -17.58
(1 row)

Time: 0.719 ms

Results saved in pg_index_test_log table

