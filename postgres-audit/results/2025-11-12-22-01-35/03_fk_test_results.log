Timing is on.

=========================================
Simple FK Index Testing
=========================================

TRUNCATE TABLE
Time: 48.360 ms
CREATE FUNCTION
Time: 6.011 ms
Function created

psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Testing 120 foreign keys...
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 1/120: xhbm_container_entity_history.container_entity (12 MB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 18.2596000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 11.4634000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 37.22.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 2/120: xhbm_container_entity.parent_container_entity (5824 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 8.1072000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.99440000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 87.73.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 3/120: xhbm_container_entity_mount.container_entity (4952 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 8.0374000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 6.3054000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 21.55.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 4/120: xhbm_container_entity_output.container_entity (2392 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 4.0732000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 2.7228000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 33.15.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 5/120: xhbm_container_entity_log_paths.container_entity (1856 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.0992000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 3.5018000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -12.99.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 6/120: xhbm_timed_event_status_entity.subscription_delivery_entity (488 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.7498000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.4384000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 47.69.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 7/120: xhbm_subscription_delivery_entity.subscription (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.2036000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.41280000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 65.70.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 8/120: xhbm_subscription_delivery_entity.triggering_event_entity (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.27100000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.16120000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -328.49.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 9/120: xnat_experimentdata.visit (272 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.4478000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.85760000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 75.13.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 10/120: xhbm_automation_event_ids_ids.parent_automation_event_ids (216 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 4.8958000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.10720000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 77.38.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 11/120: icr_roicollectiondata.subjectid (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.9114000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.22320000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 92.33.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 12/120: xhbm_configuration.config_data (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.60440000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.08860000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -80.11.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 13/120: xnat_subjectassessordata.subject_id (120 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 8.1754000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.42360000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 94.82.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 14/120: xhbm_event_service_filter_entity_project_ids.event_service_filter_entity (112 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.96740000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.36940000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 61.82.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 15/120: xnat_experimentdata_resource.xnat_abstractresource_xnat_abstractresource_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.9940000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.61340000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 69.24.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 16/120: xnat_experimentdata_resource.xnat_experimentdata_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.99680000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.40640000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 59.23.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 17/120: img_assessor_out_resource.xnat_abstractresource_xnat_abstractresource_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.91940000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.2840000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -39.66.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 18/120: img_assessor_out_resource.xnat_imageassessordata_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.04320000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.05600000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -1.23.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 19/120: xnat_imageassessordata.imagesession_id (40 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.4800000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.39440000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 88.67.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 20/120: xhbm_automation_filters_values.automation_filters (16 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.7890000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.22700000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 91.86.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
DO
Time: 3177.098 ms (00:03.177)

=========================================
SUMMARY
=========================================

 tables_tested | indexes_tested | kept | rolled_back | errors | avg_improvement_pct 
---------------+----------------+------+-------------+--------+---------------------
            17 |             20 |   15 |           5 |      0 |               66.90
(1 row)

Time: 18.979 ms

--- KEPT INDEXES (>= 5% improvement) ---
                  table_name                  |   index_name   | improvement_pct 
----------------------------------------------+----------------+-----------------
 xnat_subjectassessordata                     | idx_test_fk_13 |           94.82
 icr_roicollectiondata                        | idx_test_fk_11 |           92.33
 xhbm_automation_filters_values               | idx_test_fk_20 |           91.86
 xnat_imageassessordata                       | idx_test_fk_19 |           88.67
 xhbm_container_entity                        | idx_test_fk_2  |           87.73
 xhbm_automation_event_ids_ids                | idx_test_fk_10 |           77.38
 xnat_experimentdata                          | idx_test_fk_9  |           75.13
 xnat_experimentdata_resource                 | idx_test_fk_15 |           69.24
 xhbm_subscription_delivery_entity            | idx_test_fk_7  |           65.70
 xhbm_event_service_filter_entity_project_ids | idx_test_fk_14 |           61.82
 xnat_experimentdata_resource                 | idx_test_fk_16 |           59.23
 xhbm_timed_event_status_entity               | idx_test_fk_6  |           47.69
 xhbm_container_entity_history                | idx_test_fk_1  |           37.22
 xhbm_container_entity_output                 | idx_test_fk_4  |           33.15
 xhbm_container_entity_mount                  | idx_test_fk_3  |           21.55
(15 rows)

Time: 4.678 ms

--- ROLLED BACK (<5% improvement) ---
            table_name             |   index_name   | improvement_pct 
-----------------------------------+----------------+-----------------
 img_assessor_out_resource         | idx_test_fk_18 |           -1.23
 xhbm_container_entity_log_paths   | idx_test_fk_5  |          -12.99
 img_assessor_out_resource         | idx_test_fk_17 |          -39.66
 xhbm_configuration                | idx_test_fk_12 |          -80.11
 xhbm_subscription_delivery_entity | idx_test_fk_8  |         -328.49
(5 rows)

Time: 0.685 ms

--- ERRORS ---
 table_name | index_name | notes 
------------+------------+-------
(0 rows)

Time: 0.521 ms
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_1
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_10
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_11
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_13
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_14
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_15
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_16
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_19
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_2
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_20
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_3
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_4
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_6
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_7
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_9
DO
Time: 65.700 ms

All test indexes cleaned up
Results saved in pg_index_test_log table

