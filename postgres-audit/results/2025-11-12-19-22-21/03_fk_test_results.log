Timing is on.

=========================================
Simple FK Index Testing
=========================================

TRUNCATE TABLE
Time: 15.179 ms
CREATE FUNCTION
Time: 3.858 ms
Function created

psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Testing 120 foreign keys...
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 1/120: xhbm_container_entity_history.container_entity (12 MB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 12.8066000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 5.9410000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 53.61.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 2/120: xhbm_container_entity.parent_container_entity (5824 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.8006000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.40300000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 89.40.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 3/120: xhbm_container_entity_mount.container_entity (4952 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.2632000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 2.2104000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 32.26.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 4/120: xhbm_container_entity_output.container_entity (2392 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.9670000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.6654000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 43.87.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 5/120: xhbm_container_entity_log_paths.container_entity (1856 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.5866000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.3516000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 14.81.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 6/120: xhbm_timed_event_status_entity.subscription_delivery_entity (488 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.84580000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.83960000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by 0.73.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 7/120: xhbm_subscription_delivery_entity.subscription (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.57720000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.49700000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 13.89.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 8/120: xhbm_subscription_delivery_entity.triggering_event_entity (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.33300000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.42500000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -27.63.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 9/120: xnat_experimentdata.visit (272 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.7250000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.32140000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 81.37.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 10/120: xhbm_automation_event_ids_ids.parent_automation_event_ids (216 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.50520000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.50740000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -0.44.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 11/120: icr_roicollectiondata.subjectid (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.81240000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.20320000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 74.99.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 12/120: xhbm_configuration.config_data (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.42280000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.26540000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 37.23.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 13/120: xnat_subjectassessordata.subject_id (120 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.92360000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30080000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 67.43.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 14/120: xhbm_event_service_filter_entity_project_ids.event_service_filter_entity (112 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.41640000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.31620000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 24.06.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 15/120: xnat_experimentdata_resource.xnat_abstractresource_xnat_abstractresource_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.66580000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.27540000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 58.64.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 16/120: xnat_experimentdata_resource.xnat_experimentdata_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.30480000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.31820000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -4.40.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 17/120: img_assessor_out_resource.xnat_abstractresource_xnat_abstractresource_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.63880000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.27580000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 56.83.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 18/120: img_assessor_out_resource.xnat_imageassessordata_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.33040000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.23700000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 28.27.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 19/120: xnat_imageassessordata.imagesession_id (40 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.08740000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.24560000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 77.41.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 20/120: xhbm_automation_filters_values.automation_filters (16 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.30460000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.26020000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 14.58.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
DO
Time: 1471.566 ms (00:01.472)

=========================================
SUMMARY
=========================================

 tables_tested | indexes_tested | kept | rolled_back | errors | avg_improvement_pct 
---------------+----------------+------+-------------+--------+---------------------
            17 |             20 |   16 |           4 |      0 |               48.04
(1 row)

Time: 10.954 ms

--- KEPT INDEXES (>= 5% improvement) ---
                  table_name                  |   index_name   | improvement_pct 
----------------------------------------------+----------------+-----------------
 xhbm_container_entity                        | idx_test_fk_2  |           89.40
 xnat_experimentdata                          | idx_test_fk_9  |           81.37
 xnat_imageassessordata                       | idx_test_fk_19 |           77.41
 icr_roicollectiondata                        | idx_test_fk_11 |           74.99
 xnat_subjectassessordata                     | idx_test_fk_13 |           67.43
 xnat_experimentdata_resource                 | idx_test_fk_15 |           58.64
 img_assessor_out_resource                    | idx_test_fk_17 |           56.83
 xhbm_container_entity_history                | idx_test_fk_1  |           53.61
 xhbm_container_entity_output                 | idx_test_fk_4  |           43.87
 xhbm_configuration                           | idx_test_fk_12 |           37.23
 xhbm_container_entity_mount                  | idx_test_fk_3  |           32.26
 img_assessor_out_resource                    | idx_test_fk_18 |           28.27
 xhbm_event_service_filter_entity_project_ids | idx_test_fk_14 |           24.06
 xhbm_container_entity_log_paths              | idx_test_fk_5  |           14.81
 xhbm_automation_filters_values               | idx_test_fk_20 |           14.58
 xhbm_subscription_delivery_entity            | idx_test_fk_7  |           13.89
(16 rows)

Time: 1.346 ms

--- ROLLED BACK (<5% improvement) ---
            table_name             |   index_name   | improvement_pct 
-----------------------------------+----------------+-----------------
 xhbm_timed_event_status_entity    | idx_test_fk_6  |            0.73
 xhbm_automation_event_ids_ids     | idx_test_fk_10 |           -0.44
 xnat_experimentdata_resource      | idx_test_fk_16 |           -4.40
 xhbm_subscription_delivery_entity | idx_test_fk_8  |          -27.63
(4 rows)

Time: 1.021 ms

--- ERRORS ---
 table_name | index_name | notes 
------------+------------+-------
(0 rows)

Time: 0.390 ms
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_1
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_11
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_12
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_13
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_14
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_15
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_17
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_18
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_19
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_2
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_20
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_3
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_4
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_5
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_7
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_9
DO
Time: 40.522 ms

All test indexes cleaned up
Results saved in pg_index_test_log table

