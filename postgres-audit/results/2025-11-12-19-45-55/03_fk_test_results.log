Timing is on.

=========================================
Simple FK Index Testing
=========================================

TRUNCATE TABLE
Time: 24.308 ms
CREATE FUNCTION
Time: 4.673 ms
Function created

psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Testing 120 foreign keys...
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 1/120: xhbm_container_entity_history.container_entity (12 MB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 11.6940000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 5.9632000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 49.01.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 2/120: xhbm_container_entity.parent_container_entity (5824 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.9306000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.41600000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 89.42.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 3/120: xhbm_container_entity_mount.container_entity (4952 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 3.8666000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 2.3270000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 39.82.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 4/120: xhbm_container_entity_output.container_entity (2392 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.4890000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.5114000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 39.28.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 5/120: xhbm_container_entity_log_paths.container_entity (1856 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.4758000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.3836000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 6.25.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 6/120: xhbm_timed_event_status_entity.subscription_delivery_entity (488 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.89180000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.70800000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 20.61.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 7/120: xhbm_subscription_delivery_entity.subscription (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.47900000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.31000000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 35.28.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 8/120: xhbm_subscription_delivery_entity.triggering_event_entity (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.36820000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.34320000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 6.79.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 9/120: xnat_experimentdata.visit (272 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.8340000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.37800000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 79.39.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 10/120: xhbm_automation_event_ids_ids.parent_automation_event_ids (216 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.59800000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.34900000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 41.64.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 11/120: icr_roicollectiondata.subjectid (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.98120000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.27280000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 72.20.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 12/120: xhbm_configuration.config_data (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.57580000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30340000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 47.31.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 13/120: xnat_subjectassessordata.subject_id (120 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.2352000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.42180000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 65.85.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 14/120: xhbm_event_service_filter_entity_project_ids.event_service_filter_entity (112 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.52920000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.31560000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 40.36.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 15/120: xnat_experimentdata_resource.xnat_abstractresource_xnat_abstractresource_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.46680000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.34060000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 27.04.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 16/120: xnat_experimentdata_resource.xnat_experimentdata_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.26340000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30880000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -17.24.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 17/120: img_assessor_out_resource.xnat_abstractresource_xnat_abstractresource_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.51680000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.29940000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 42.07.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 18/120: img_assessor_out_resource.xnat_imageassessordata_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.45880000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.28300000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 38.32.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 19/120: xnat_imageassessordata.imagesession_id (40 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.70220000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.19780000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 71.83.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 20/120: xhbm_automation_filters_values.automation_filters (16 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.21780000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.21420000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by 1.65.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
DO
Time: 1479.801 ms (00:01.480)

=========================================
SUMMARY
=========================================

 tables_tested | indexes_tested | kept | rolled_back | errors | avg_improvement_pct 
---------------+----------------+------+-------------+--------+---------------------
            17 |             20 |   18 |           2 |      0 |               45.14
(1 row)

Time: 16.783 ms

--- KEPT INDEXES (>= 5% improvement) ---
                  table_name                  |   index_name   | improvement_pct 
----------------------------------------------+----------------+-----------------
 xhbm_container_entity                        | idx_test_fk_2  |           89.42
 xnat_experimentdata                          | idx_test_fk_9  |           79.39
 icr_roicollectiondata                        | idx_test_fk_11 |           72.20
 xnat_imageassessordata                       | idx_test_fk_19 |           71.83
 xnat_subjectassessordata                     | idx_test_fk_13 |           65.85
 xhbm_container_entity_history                | idx_test_fk_1  |           49.01
 xhbm_configuration                           | idx_test_fk_12 |           47.31
 img_assessor_out_resource                    | idx_test_fk_17 |           42.07
 xhbm_automation_event_ids_ids                | idx_test_fk_10 |           41.64
 xhbm_event_service_filter_entity_project_ids | idx_test_fk_14 |           40.36
 xhbm_container_entity_mount                  | idx_test_fk_3  |           39.82
 xhbm_container_entity_output                 | idx_test_fk_4  |           39.28
 img_assessor_out_resource                    | idx_test_fk_18 |           38.32
 xhbm_subscription_delivery_entity            | idx_test_fk_7  |           35.28
 xnat_experimentdata_resource                 | idx_test_fk_15 |           27.04
 xhbm_timed_event_status_entity               | idx_test_fk_6  |           20.61
 xhbm_subscription_delivery_entity            | idx_test_fk_8  |            6.79
 xhbm_container_entity_log_paths              | idx_test_fk_5  |            6.25
(18 rows)

Time: 0.818 ms

--- ROLLED BACK (<5% improvement) ---
           table_name           |   index_name   | improvement_pct 
--------------------------------+----------------+-----------------
 xhbm_automation_filters_values | idx_test_fk_20 |            1.65
 xnat_experimentdata_resource   | idx_test_fk_16 |          -17.24
(2 rows)

Time: 0.389 ms

--- ERRORS ---
 table_name | index_name | notes 
------------+------------+-------
(0 rows)

Time: 0.219 ms
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_1
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_10
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_11
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_12
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_13
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_14
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_15
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_17
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_18
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_19
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_2
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_3
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_4
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_5
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_6
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_7
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_8
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_9
DO
Time: 42.157 ms

All test indexes cleaned up
Results saved in pg_index_test_log table

