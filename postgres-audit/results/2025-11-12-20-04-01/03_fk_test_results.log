Timing is on.

=========================================
Simple FK Index Testing
=========================================

TRUNCATE TABLE
Time: 14.998 ms
CREATE FUNCTION
Time: 4.393 ms
Function created

psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Testing 119 foreign keys...
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 1/119: xhbm_container_entity_history.container_entity (12 MB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 11.6776000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 6.3636000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 45.51.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 2/119: xhbm_container_entity.parent_container_entity (5824 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 4.0756000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.28520000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 93.00.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 3/119: xhbm_container_entity_mount.container_entity (4952 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 4.0248000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 2.4850000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 38.26.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 4/119: xhbm_container_entity_output.container_entity (2392 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 2.7830000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 1.6530000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 40.60.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 5/119: xhbm_timed_event_status_entity.subscription_delivery_entity (488 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.95860000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.75140000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 21.61.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 6/119: xhbm_subscription_delivery_entity.subscription (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.59980000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.40920000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 31.78.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 7/119: xhbm_subscription_delivery_entity.triggering_event_entity (288 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.27160000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.33980000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -25.11.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 8/119: xnat_experimentdata.visit (272 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.9864000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30220000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 84.79.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 9/119: xhbm_automation_event_ids_ids.parent_automation_event_ids (216 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.60740000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.36320000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 40.20.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 10/119: icr_roicollectiondata.subjectid (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.82860000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30100000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 63.67.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 11/119: xhbm_configuration.config_data (160 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.43220000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.28340000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 34.43.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 12/119: xnat_subjectassessordata.subject_id (120 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.97460000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30880000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 68.32.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 13/119: xhbm_event_service_filter_entity_project_ids.event_service_filter_entity (112 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.33980000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.34040000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -0.18.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 14/119: xnat_experimentdata_resource.xnat_abstractresource_xnat_abstractresource_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.55480000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.32900000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 40.70.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 15/119: xnat_experimentdata_resource.xnat_experimentdata_id (104 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.27900000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30240000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ROLLBACK - only improved by -8.39.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 16/119: img_assessor_out_resource.xnat_abstractresource_xnat_abstractresource_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.51360000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.30120000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 41.36.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 17/119: img_assessor_out_resource.xnat_imageassessordata_id (72 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.35120000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.32920000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 6.26.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 18/119: xnat_imageassessordata.imagesession_id (40 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 1.13020000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.26500000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 76.55.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 19/119: xhbm_automation_filters_values.automation_filters (16 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.31460000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.19460000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 38.14.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Test 20/119: xhbm_command_input_entity.command_entity (16 kB)
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  ========================================
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Baseline: 0.38380000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  Index created
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  With index: 0.23580000000000000000.2f ms
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  KEEP - improved by 38.56.2f%
psql:/tmp/test_all_fk_simple.sql:160: NOTICE:  
DO
Time: 1392.380 ms (00:01.392)

=========================================
SUMMARY
=========================================

 tables_tested | indexes_tested | kept | rolled_back | errors | avg_improvement_pct 
---------------+----------------+------+-------------+--------+---------------------
            17 |             20 |   17 |           3 |      0 |               47.28
(1 row)

Time: 12.868 ms

--- KEPT INDEXES (>= 5% improvement) ---
            table_name             |   index_name   | improvement_pct 
-----------------------------------+----------------+-----------------
 xhbm_container_entity             | idx_test_fk_2  |           93.00
 xnat_experimentdata               | idx_test_fk_8  |           84.79
 xnat_imageassessordata            | idx_test_fk_18 |           76.55
 xnat_subjectassessordata          | idx_test_fk_12 |           68.32
 icr_roicollectiondata             | idx_test_fk_10 |           63.67
 xhbm_container_entity_history     | idx_test_fk_1  |           45.51
 img_assessor_out_resource         | idx_test_fk_16 |           41.36
 xnat_experimentdata_resource      | idx_test_fk_14 |           40.70
 xhbm_container_entity_output      | idx_test_fk_4  |           40.60
 xhbm_automation_event_ids_ids     | idx_test_fk_9  |           40.20
 xhbm_command_input_entity         | idx_test_fk_20 |           38.56
 xhbm_container_entity_mount       | idx_test_fk_3  |           38.26
 xhbm_automation_filters_values    | idx_test_fk_19 |           38.14
 xhbm_configuration                | idx_test_fk_11 |           34.43
 xhbm_subscription_delivery_entity | idx_test_fk_6  |           31.78
 xhbm_timed_event_status_entity    | idx_test_fk_5  |           21.61
 img_assessor_out_resource         | idx_test_fk_17 |            6.26
(17 rows)

Time: 0.940 ms

--- ROLLED BACK (<5% improvement) ---
                  table_name                  |   index_name   | improvement_pct 
----------------------------------------------+----------------+-----------------
 xhbm_event_service_filter_entity_project_ids | idx_test_fk_13 |           -0.18
 xnat_experimentdata_resource                 | idx_test_fk_15 |           -8.39
 xhbm_subscription_delivery_entity            | idx_test_fk_7  |          -25.11
(3 rows)

Time: 0.690 ms

--- ERRORS ---
 table_name | index_name | notes 
------------+------------+-------
(0 rows)

Time: 0.445 ms
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_1
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_10
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_11
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_12
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_14
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_16
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_17
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_18
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_19
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_2
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_20
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_3
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_4
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_5
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_6
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_8
psql:/tmp/test_all_fk_simple.sql:218: NOTICE:  Dropped: idx_test_fk_9
DO
Time: 45.957 ms

All test indexes cleaned up
Results saved in pg_index_test_log table

